@import "tailwindcss";
@config "../../tailwind.config.cjs";

/* Design tokens (source: colors and fonts.scss + spacing and colors.css) */
@import "../styles/variables.css";

html,
body {
  max-width: 100vw;
  overflow-x: hidden;
}

body {
  color: var(--token-color-accent);
  background: var(--token-color-base);
  font-family: var(--token-font-family-base);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Prevent background scroll when mobile menu is open */
body.menu-open {
  overflow: hidden;
  touch-action: none;
  height: 100%;
  width: 100%;
}

* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

a {
  color: inherit;
  text-decoration: none;
}

/**
 * Text Link tokens — link with underline on hover/focus
 * Uses background-size trick for smooth underline without shifting layout.
 * 
 * Usage: Apply .text-link-h5 class to links that use h5 sizing (24px)
 * 
 * Pattern matches:
 * - Font size: h5 (24px)
 * - Font weight: semibold (600)
 * - Line height: 140%
 * - Underline: appears on hover/focus (1px thin line)
 */
.text-link-h5 {
  font-family: var(--token-font-family-base);
  font-size: var(--token-size-h5); /* 24px */
  font-weight: var(--token-weight-semibold); /* 600 */
  line-height: var(--token-leading-140); /* 140% */
  color: var(--token-color-accent);
  display: inline-block;
  text-decoration: none !important;
  background-image: linear-gradient(var(--token-color-accent), var(--token-color-accent));
  background-repeat: no-repeat;
  background-position: 0 100%;
  background-size: 0% 1px;
  transition: background-size 0.2s ease;
}

.text-link-h5:hover,
.text-link-h5:focus-visible {
  background-size: 100% 1px;
}

/**
 * Section layout pattern — used for all top-level page sections (responsive baseline).
 * Sections are full-bleed (100% viewport width).
 * Inner content uses token-based horizontal padding (var(--token-space-24)); desktop layout unchanged.
 */
.section-wrap {
  width: 100%;
  display: block;
}

.section-inner {
  width: 100%;
  max-width: none;
  padding-left: var(--token-space-24);
  padding-right: var(--token-space-24);
  margin-left: auto;
  margin-right: auto;
}

/* Optional constrained variant (use only where explicitly needed) */
.section-inner--constrained {
  max-width: 1440px;
}

/* Services: hide single-image layout on desktop (shown on mobile and tablet via media queries) */
.services-layout-mobile {
  display: none;
}

/**
 * TABLET ONLY (768px–1023px): same structural logic as mobile — single image, headings-only list, CTA right-aligned.
 * Uses existing tablet tokens (--token-space-64, --token-space-24, etc. resolve to tablet values in variables.css).
 * No hover; container keeps default .section-inner padding (24px), not mobile 8px.
 */
@media (min-width: 768px) and (max-width: 1023px) {
  .services-layout-mobile {
    display: block;
    width: 100%;
  }

  .services-layout-desktop {
    display: none;
  }

  .services-hero-visual {
    position: relative;
    width: 100%;
    aspect-ratio: 533 / 353;
    overflow: hidden;
  }

  .services-list-mobile {
    list-style: none;
    margin: 0;
    padding: 0;
    margin-top: var(--token-space-64); /* image → list gap (tablet token) */
    display: block;
  }

  .services-item-mobile {
    width: 100%;
  }

  .services-item-divider {
    width: 100%;
    height: 1px;
    background: var(--token-color-accent);
    margin: 0;
  }

  .services-item-title-mobile {
    display: block;
    margin-top: var(--token-space-24);
    margin-bottom: var(--token-space-24);
    min-height: var(--token-size-48);
    font-family: var(--token-font-family-base);
    font-size: var(--token-size-h3);
    font-weight: var(--token-weight-semibold);
    line-height: var(--token-leading-110);
    letter-spacing: var(--token-tracking-header-3);
  }

  .services-list-mobile .services-item-mobile:last-child .services-item-title-mobile {
    margin-bottom: 0;
  }

  .services-cta-mobile {
    margin-top: var(--token-space-64); /* last item → CTA (tablet token) */
    display: flex;
    justify-content: flex-end;
    width: 100%;
  }
}

/**
 * Header navigation interactions (link items only)
 * Note: padding for link items is controlled in `Header.tsx` so dividers ("/") can
 * be their own independent list items with zero horizontal padding.
 */
.header-nav-link {
  position: relative;
}

/* Header nav divider ("/") — independent, non-interactive, no horizontal padding */
.header-nav-divider {
  padding-left: 0;
  padding-right: 0;
  pointer-events: none;
  user-select: none;
}

/* Header nav menu panel */
.header-nav-menu {
  padding: 0;
  background: transparent;
}

/* MOBILE ONLY: container padding + burger panel — apply only for viewport < 768px */
@media (max-width: 767px) {
  /* Main containers: 8px horizontal padding on mobile (tablet/desktop unchanged) */
  .section-inner {
    padding-left: var(--token-space-8);
    padding-right: var(--token-space-8);
  }

  /* Services — mobile-only layout
   * - Show single hero visual (533 / 353 aspect ratio) under title.
   * - Below: vertical list of headings-only services with 1px dividers.
   * - CTA button sits below list with 64px gap.
   * - Desktop/tablet layout hidden at this breakpoint; desktop markup preserved.
   */
  .services-layout-mobile {
    display: block;
    width: 100%;
  }

  .services-layout-desktop {
    display: none;
  }

  .services-hero-visual {
    position: relative;
    width: 100%;
    aspect-ratio: 533 / 353;
    overflow: hidden;
  }

  .services-list-mobile {
    list-style: none;
    margin: 0;
    padding: 0;
    margin-top: var(--token-space-64); /* image → list gap */
    display: block;
  }

  .services-item-mobile {
    width: 100%;
  }

  .services-item-divider {
    width: 100%;
    height: 1px;
    background: var(--token-color-accent);
    margin: 0;
  }

  .services-item-title-mobile {
    display: block;
    margin-top: var(--token-space-24);
    margin-bottom: var(--token-space-24);
    min-height: var(--token-size-48); /* tappable target ≥44px */
    font-family: var(--token-font-family-base);
    font-size: var(--token-size-h3);
    font-weight: var(--token-weight-semibold);
    line-height: var(--token-leading-110);
    letter-spacing: var(--token-tracking-header-3);
  }

  /* Last item: no extra bottom margin so CTA gap is exactly token-space-64 */
  .services-list-mobile .services-item-mobile:last-child .services-item-title-mobile {
    margin-bottom: 0;
  }

  .services-cta-mobile {
    margin-top: var(--token-space-64); /* last item → CTA gap */
    display: flex;
    justify-content: flex-end;
    width: 100%;
  }

  /* About Me page: sections with inline 24px side padding use 8px on mobile to match site */
  .about-page .about-description-wrapper,
  .about-page .skills-wrapper {
    padding-left: var(--token-space-8) !important;
    padding-right: var(--token-space-8) !important;
  }

  /* Footer: 8px side padding on mobile to align with global container grid (override inline 24px) */
  footer .footer-wrapper {
    padding-left: var(--token-space-8) !important;
    padding-right: var(--token-space-8) !important;
  }

  /* Panel overlays whole viewport including header (no gap) */
  .header-nav-menu {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    width: 100vw;
    height: 100vh;
    display: none;
    flex-direction: column;
    background: var(--token-color-base);
    z-index: 90;
    overflow-y: auto;
    pointer-events: auto;
  }

  /* When open, show the panel */
  .header-nav-menu.is-open {
    display: flex;
  }

  /* Panel inner: take full remaining height so layout can push social to bottom */
  .header-nav-menu-inner {
    width: 100%;
    max-width: var(--token-site-max-width, 1200px);
    flex: 1;
    min-height: 0;
    box-sizing: border-box;
    margin-left: auto;
    margin-right: auto;
    display: flex;
    flex-direction: column;
  }

  /* One vertical flex container: fills inner; logo at top, nav then auto-gap then social at bottom */
  .burger-menu-layout {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0;
    padding-left: var(--token-space-8);
    padding-right: var(--token-space-8);
    padding-top: var(--token-space-16); /* align with header so logo position matches */
    box-sizing: border-box;
  }

  /* Gap between logo and nav; margin-bottom: auto creates auto-gap above social */
  .burger-menu-layout > nav {
    margin-top: var(--token-space-64);
    margin-bottom: auto;
  }

  /* Social block: sticks to bottom with token spacing; margin-top: auto = auto-gap below nav */
  .header-nav-menu .burger-social {
    margin-top: auto;
    padding-bottom: var(--token-space-24);
  }

  /* Nav list: no gap between items in burger menu */
  .header-nav-menu .burger-menu-layout nav ul {
    gap: 0;
  }

  /* Nav items: no horizontal padding in burger menu; no pull/translate on hover */
  .header-nav-menu .header-nav-link {
    padding-left: 0 !important;
    padding-right: 0 !important;
    transform: none !important;
    transition: none !important;
  }

  /* Hide dot in burger menu and remove its space so nav links start flush left */
  .header-nav-menu .header-nav-link a > span:first-of-type {
    display: none !important;
  }

  /* Mobile nav items use H1 typography token */
  .header-nav-menu.is-open .header-nav-link a {
    font-size: var(--token-size-h1) !important;
    font-weight: var(--token-weight-semibold);
    line-height: var(--token-leading-110);
    letter-spacing: var(--token-tracking-header-1);
    text-transform: none; /* no caps in mobile burger menu */
  }

  /* Social block: last child in .burger-menu-layout — flows to bottom via flex (no absolute positioning) */

  .burger-social-link {
    /* Inherit typography from .text-link-h5 (H5 token, semibold) */
  }

  .burger-social-link:hover,
  .burger-social-link:focus-visible {
    opacity: 0.8;
  }

  /* Ensure hamburger slot stays fixed size and visible on the right */
  .header-hamburger-wrap {
    width: var(--token-size-48);
    min-width: var(--token-size-48);
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 110;
  }
}

@media (min-width: 768px) {
  .header-nav-menu {
    position: static;
    width: auto;
    height: auto;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    background: transparent;
    overflow: visible;
  }

  .header-nav-menu-inner {
    display: contents; /* behave like original DOM structure on desktop */
  }

  .burger-menu-layout {
    display: contents; /* unwrap so logo, nav, social, avatar flow in header row on desktop */
  }
}

/**
 * Label Link tokens — underlined link variants of label sizes
 * All use 115% line height, medium weight, 0px letter spacing, with underline
 * - label-link-lg: 18px
 * - label-link-md: 16px
 * - label-link-sm: 14px
 */
.label-link-lg {
  font-family: var(--token-font-family-base);
  font-size: var(--token-size-label-lg); /* 18px */
  font-weight: var(--token-weight-medium); /* 500 */
  line-height: var(--token-leading-115); /* 115% */
  letter-spacing: 0px;
  color: var(--token-color-accent);
  display: inline-block;
  text-decoration: none !important;
  background-image: linear-gradient(currentColor, currentColor);
  background-repeat: no-repeat;
  background-position: 0 100%;
  background-size: 0% 1px;
  transition: background-size 0.16s ease;
}

.label-link-md {
  font-family: var(--token-font-family-base);
  font-size: var(--token-size-label-md); /* 16px */
  font-weight: var(--token-weight-medium); /* 500 */
  line-height: var(--token-leading-115); /* 115% */
  letter-spacing: 0px;
  color: var(--token-color-accent);
  display: inline-block;
  text-decoration: none !important;
  background-image: linear-gradient(currentColor, currentColor);
  background-repeat: no-repeat;
  background-position: 0 100%;
  background-size: 0% 1px;
  transition: background-size 0.16s ease;
}

.label-link-sm {
  font-family: var(--token-font-family-base);
  font-size: var(--token-size-label-sm); /* 14px */
  font-weight: var(--token-weight-medium); /* 500 */
  line-height: var(--token-leading-115); /* 115% */
  letter-spacing: 0px;
  color: var(--token-color-accent);
  display: inline-block;
  text-decoration: none !important;
  background-image: linear-gradient(currentColor, currentColor);
  background-repeat: no-repeat;
  background-position: 0 100%;
  background-size: 0% 1px;
  transition: background-size 0.16s ease;
}

.label-link-lg:hover,
.label-link-md:hover,
.label-link-sm:hover {
  background-size: 100% 1px;
}

.label-link-lg:focus-visible,
.label-link-md:focus-visible,
.label-link-sm:focus-visible {
  outline: 2px solid var(--token-color-accent);
  outline-offset: 2px;
}

/**
 * Case Study Hero — responsive title typography
 *
 * Token source-of-truth: --token-size-display-1 (150px) at desktop.
 * Scales down at each breakpoint for mobile legibility.
 *
 * Letter-spacing tightens proportionally with font-size reduction.
 */
.case-study-hero,
.case-study-intro,
.case-study-text-image,
.case-study-text-image-grid {
  font-family: var(--token-font-family-base);
}

.case-study-hero .hero-title {
  font-size: var(--token-size-display-1); /* 150px */
  font-weight: var(--token-weight-semibold); /* 600 */
  line-height: var(--token-leading-100); /* 100% */
  letter-spacing: -6px;
  font-family: var(--token-font-family-base);
  color: var(--token-color-accent);
}

@media (max-width: 1024px) {
  .case-study-hero .hero-title {
    font-size: var(--token-size-h1); /* 84px */
    letter-spacing: -4px;
  }
}

@media (max-width: 768px) {
  .case-study-hero .hero-title {
    font-size: var(--token-size-h2); /* 64px */
    letter-spacing: -3px;
  }
}

@media (max-width: 480px) {
  .case-study-hero .hero-title {
    font-size: var(--token-size-h3); /* 48px */
    letter-spacing: -2px;
  }
}

/**
 * Case Study Hero — meta row (Client / Services)
 *
 * Desktop: side-by-side with --token-space-64 gap
 * Mobile (≤768px): stacked vertically with --token-space-16 gap
 */
.case-study-hero .hero-meta {
  display: flex;
  flex-direction: row;
  gap: var(--token-space-64);
}

@media (max-width: 768px) {
  .case-study-hero .hero-meta {
    flex-direction: column;
    gap: var(--token-space-16);
  }
}

/**
 * Case Study Hero — meta item (label + value pair)
 * Block layout: uppercase label on top, value below
 */
.case-study-hero .hero-meta-item {
  display: flex;
  flex-direction: column;
  gap: var(--token-space-4);
}

.case-study-hero .hero-meta-label {
  display: block;
  font-family: var(--token-font-family-base);
  font-size: var(--token-size-overline); /* 12px */
  font-weight: var(--token-weight-semibold); /* 600 */
  line-height: var(--token-leading-140); /* 140% */
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--token-color-accent);
}

.case-study-hero .hero-meta-value {
  font-family: var(--token-font-family-base);
  font-size: var(--token-size-body-md); /* 16px */
  font-weight: var(--token-weight-regular); /* 400 */
  line-height: var(--token-leading-150); /* 150% */
  color: var(--token-color-accent);
}

/**
 * Case Study Hero — full-bleed visual
 * No side paddings — image spans full viewport width.
 * Sits outside .section-inner to bypass 24px container padding.
 */
.case-study-hero .hero-visual {
  width: 100%;
  margin-top: 0;
}

/**
 * Case Study Hero — prefers-reduced-motion
 * No auto-animations on the hero visual.
 * (Component renders a static image; this rule future-proofs
 * against any transition additions.)
 */
@media (prefers-reduced-motion: reduce) {
  .case-study-hero,
  .case-study-hero * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/**
 * Case Study Intro — title typography and layout
 *
 * Token source-of-truth: --token-size-h1 (84px) at desktop, matching
 * the Skills section title on the About page.
 * Scales down at each breakpoint for mobile legibility.
 */
.case-study-intro .intro-heading {
  font-size: var(--token-size-h1); /* 84px */
  font-weight: var(--token-weight-semibold); /* 600 */
  line-height: var(--token-leading-100); /* 100% */
  letter-spacing: var(--token-tracking-header-1);
  font-family: var(--token-font-family-base);
  color: var(--token-color-accent);
}

/**
 * Case Study Intro — paragraph text
 */
.case-study-intro .intro-paragraph {
  font-family: var(--token-font-family-base);
  font-size: var(--token-size-body-lg); /* 18px */
  font-weight: var(--token-weight-regular); /* 400 */
  line-height: var(--token-leading-150); /* 150% */
  color: var(--token-color-accent);
  max-width: 566px;
}

/**
 * Case Study Intro — full-bleed visual below text
 * No side padding; sits outside .section-inner.
 */
.case-study-intro .intro-visual {
  width: 100%;
  margin-top: var(--token-space-64);
}

/**
 * Case Study Intro — vertical paddings for content section
 * 24px top and bottom via spacing token.
 */
.case-study-intro .section-inner {
  padding-top: var(--token-space-24);
  padding-bottom: var(--token-space-24);
}

/**
 * Case Study Intro — prefers-reduced-motion
 * No auto-animations; future-proofs against added transitions.
 */
@media (prefers-reduced-motion: reduce) {
  .case-study-intro,
  .case-study-intro * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/**
 * Case Study Text + Image — typography and layout
 * Scoped to section so these rules win over Tailwind/base.
 *
 * Desktop / tablet (≥768px):
 * - Title left (max-width 684px), paragraph right (max-width 566px).
 * - Horizontal gap: --token-space-80.
 *
 * Mobile (<768px):
 * - Stack vertically, title first then paragraph.
 * - Vertical gap between title and paragraph: --token-space-64.
 */
section.case-study-text-image .section-title,
section.case-study-text-image-grid .section-title {
  font-size: var(--token-size-h2) !important; /* 64px — h2 token */
  font-weight: var(--token-weight-semibold) !important; /* 600 */
  line-height: var(--token-leading-110) !important; /* 110% */
  letter-spacing: var(--token-tracking-header-2);
  font-family: var(--token-font-family-base);
  color: var(--token-color-accent);
}

section.case-study-text-image .section-paragraph,
section.case-study-text-image-grid .section-paragraph {
  font-family: var(--token-font-family-base);
  font-size: var(--token-size-body-lg) !important; /* 18px */
  font-weight: var(--token-weight-semibold) !important; /* 600 */
  line-height: var(--token-leading-150) !important; /* 150% */
  color: var(--token-color-accent);
}

.case-study-text-image .text-image-row {
  width: 100%;
}

/**
 * Case Study Text + Image Grid — layout
 *
 * Desktop / tablet (≥768px):
 * - Reuses text row layout: title left, paragraph right.
 * - Images grid: 2 columns with 24px gap and 24px horizontal padding.
 *
 * Mobile (<768px):
 * - Text row stacks vertically (title then paragraph).
 * - Images grid becomes a single column (images stacked with 24px vertical gap).
 */
.case-study-text-image-grid .images-grid {
  width: 100%;
}

@media (max-width: 768px) {
  .case-study-text-image-grid .text-image-row {
    flex-direction: column;
    align-items: flex-start;
  }

  .case-study-text-image-grid .paragraph-wrap {
    margin-left: 0 !important;
    text-align: left !important;
  }

  .case-study-text-image-grid .images-grid {
    grid-template-columns: 1fr !important;
  }
}

/**
 * Case Study Text + Image — prefers-reduced-motion
 */
@media (prefers-reduced-motion: reduce) {
  .case-study-text-image,
  .case-study-text-image * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .case-study-text-image-grid,
  .case-study-text-image-grid * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Typography tracking mapping — ensure token usage is enforced */
.text-display-1 { letter-spacing: var(--token-tracking-display-1); }
.text-display-2 { letter-spacing: var(--token-tracking-display-2); }
.text-h1 { letter-spacing: var(--token-tracking-header-1); }
.text-h2 { letter-spacing: var(--token-tracking-header-2); }
.text-h3 { letter-spacing: var(--token-tracking-header-3); }
.text-h4 { letter-spacing: var(--token-tracking-header-4); }
.text-h5 { letter-spacing: var(--token-tracking-header-5); }
.text-h6 { letter-spacing: var(--token-tracking-header-6); }

/**
 * Testimonials — mobile-only layout (max-width: 767px)
 * Section title "Feedback", avatar above meta, 24px gap avatar→meta, 64px gap meta→controls, 64×64 buttons.
 * Tokens only; desktop/tablet unchanged.
 */
@media (max-width: 767px) {
  .testimonial-item {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 0;
    width: 100%;
  }

  .testimonial-avatar-block {
    margin-top: 0;
  }

  .testimonial-avatar {
    width: var(--token-size-64);
    height: var(--token-size-64);
    border-radius: 50%;
    object-fit: cover;
    display: block;
    margin: 0;
  }

  .testimonial-meta {
    margin-top: var(--token-space-24);
  }

  .testimonial-name {
    font-family: var(--token-font-family-base);
    font-size: var(--token-size-h6);
    font-weight: var(--token-weight-semibold);
    line-height: var(--token-leading-140);
    color: var(--token-color-accent);
  }

  .testimonial-role-or-desc {
    font-family: var(--token-font-family-base);
    font-size: var(--token-size-label-md);
    font-weight: var(--token-weight-medium);
    line-height: var(--token-leading-115);
    letter-spacing: 0;
    color: var(--token-color-accent);
    margin-top: var(--token-space-4);
  }

  .testimonial-controls {
    margin-top: var(--token-space-64);
    display: flex;
    align-items: center;
    gap: var(--token-space-16);
    width: 100%;
    justify-content: center;
    flex-wrap: wrap;
  }

  .testimonial-control {
    width: var(--token-size-64);
    height: var(--token-size-64);
    min-width: var(--token-size-64);
    min-height: var(--token-size-64);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: var(--token-color-base);
    cursor: pointer;
    padding: 0;
    outline: none;
    transition: background-color 0.2s ease;
  }

  .testimonial-control[aria-disabled="true"] {
    background: transparent;
    cursor: not-allowed;
  }

  .testimonial-control:not([aria-disabled="true"]) {
    background: var(--token-color-accent);
  }

  .testimonial-control:focus-visible {
    outline: 2px solid var(--token-color-accent);
    outline-offset: 2px;
  }

  .testimonial-pagination {
    font-family: var(--token-font-family-base);
    font-size: var(--token-size-label-md);
    font-weight: var(--token-weight-medium);
    line-height: var(--token-leading-115);
    color: var(--token-color-accent);
  }
}

